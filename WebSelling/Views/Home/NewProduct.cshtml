@using WebSelling.Models;
@model List<Product>
@Html.Action("Css", "Home")
<style>
    .content {
        text-overflow: ellipsis;
        overflow: hidden;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        display: -webkit-box;
        font-weight: initial;
    }

    .chuyen {
        color: black;
    }

        .chuyen:hover {
            color: #4A9F43 !important;
        }
</style>
<link href="~/Content/Layout/css/Newproduct.css" rel="stylesheet" />
<div class="py-xl-5 py-lg-3">
    <span style="margin-left: 3%; font-size: 30px; font-family: 'Segoe UI'!important; font-weight: bold">Gợi Ý Hôm Nay</span>
    <div class="layout">
        <section class="inner">
            <ul class="row grid">
                @foreach (var item in Model)
                {
                    <li class="col-md-3 grid-tile">
                        <div class="item">
                            <div class="item-img" style=" background-size: cover; background-image: url('../../Content/Image/@item.Product_Img')"></div>
                            <div class="item-pnl">
                                <div class="pnl-wrapper">
                                    <div class="pnl-description">
                                        <span class="pnl-label"><a class="chuyen" href="@Url.Action("DetailsProduct", "Home", new { productid = item.Product_ID})">@item.Product_Name</a></span>
                                        <span class="pnl-price">@{float price = (float)item.Product_Price;} @price.ToString("#,##0") VNĐ</span>
                                    </div>
                                    <div class="pnl-favorites">
                                        <div class="pnl-ic-wrapper">
                                            <span class="pnl-ic">
                                                <svg height="30" viewBox="0 -20 480 480" width="30" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><linearGradient id="a" gradientUnits="userSpaceOnUse" x1="240" x2="240" y1="440" y2="-39.312"><stop offset="0" stop-color="#e93e3a" /><stop offset=".352" stop-color="#ed6a3c" /><stop offset=".705" stop-color="#f3903f" /><stop offset="1" stop-color="#fdc70c" /></linearGradient><path d="m348 0c-43 .0664062-83.28125 21.039062-108 56.222656-24.71875-35.183594-65-56.1562498-108-56.222656-70.320312 0-132 65.425781-132 140 0 72.679688 41.039062 147.535156 118.6875 216.480469 35.976562 31.882812 75.441406 59.597656 117.640625 82.625 2.304687 1.1875 5.039063 1.1875 7.34375 0 42.183594-23.027344 81.636719-50.746094 117.601563-82.625 77.6875-68.945313 118.726562-143.800781 118.726562-216.480469 0-74.574219-61.679688-140-132-140zm-108 422.902344c-29.382812-16.214844-224-129.496094-224-282.902344 0-66.054688 54.199219-124 116-124 41.867188.074219 80.460938 22.660156 101.03125 59.128906 1.539062 2.351563 4.160156 3.765625 6.96875 3.765625s5.429688-1.414062 6.96875-3.765625c20.570312-36.46875 59.164062-59.054687 101.03125-59.128906 61.800781 0 116 57.945312 116 124 0 153.40625-194.617188 266.6875-224 282.902344zm0 0" fill="url(#a)" /></svg>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="pnl-tocart">
                                        <div class="pnl-ic-wrapper">
                                            <span class="pnl-ic">
                                                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="Gradient" viewBox="0 0 512 512" width="35" height="35"><defs><linearGradient id="linear-gradient" x1="256" y1="480" x2="256" y2="32" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#12c0e7" /><stop offset="0.5" stop-color="#c271eb" /><stop offset="1" stop-color="#f44f5a" /></linearGradient></defs><path d="M479.977,263.386A8,8,0,0,0,472,256H357.21l-5.22-104.4A8,8,0,0,0,344,144H288V104a71.975,71.975,0,0,0-96-67.872A71.975,71.975,0,0,0,96,104v40H40a8,8,0,0,0-7.99,7.6l-16,320A8,8,0,0,0,24,480H488a8,8,0,0,0,7.977-8.614ZM456,438.422,473.052,464h-34.1Zm21.676,3.669-13.914-20.87L448.84,272h15.752ZM432.76,272l15,149.946L430.2,448.28,416.639,272Zm-91.57-16H326.133l-5.648-96h15.9Zm-36.733-96,5.648,96h-16.9l-4.8-96ZM216,48a56.064,56.064,0,0,1,56,56v40H240V104a71.886,71.886,0,0,0-26.727-55.931C214.177,48.026,215.085,48,216,48Zm-24,5.414A56.069,56.069,0,0,1,224,104v40H160V104A56.069,56.069,0,0,1,192,53.414ZM112,104a56.064,56.064,0,0,1,56-56c.915,0,1.823.026,2.727.069A71.883,71.883,0,0,0,144,104v40H112Zm96.592,360H32.41l15.2-304H96v51.719L75.562,225.344A8,8,0,0,0,72,232v64a8,8,0,0,0,8,8h48a8,8,0,0,0,8-8V232a8,8,0,0,0-3.562-6.656L112,211.719V160H224v24a8,8,0,0,0,16,0V160h32.39l4.8,96H232a8,8,0,0,0-7.977,7.386ZM104,225.615l16,10.666V288H88V236.281ZM239.408,272H400.592l14.769,192H224.639ZM368,312v64a40.045,40.045,0,0,1-40,40H312a40.045,40.045,0,0,1-40-40V312a8,8,0,0,1,16,0v64a24.027,24.027,0,0,0,24,24h16a24.027,24.027,0,0,0,24-24V312a8,8,0,0,1,16,0Z" style="fill:url(#linear-gradient)" /></svg>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                }
            </ul>
        </section>
    </div>
</div>
<script>
    'use strict';

    function isIOSSafari() {
        var userAgent;
        userAgent = window.navigator.userAgent;
        return userAgent.match(/iPad/i) || userAgent.match(/iPhone/i);
    };

    function isTouch() {
        var isIETouch;
        isIETouch = navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;
        return [].indexOf.call(window, 'ontouchstart') >= 0 || isIETouch;
    };

    var isIOS = isIOSSafari(),
        clickHandler = isIOS || isTouch() ? 'touchstart' : 'click';

    function extend(a, b) {
        for (var key in b) {
            if (b.hasOwnProperty(key)) {
                a[key] = b[key];
            }
        }
        return a;
    }

    function Anima(el, options) {
        this.el = el;
        this.options = extend({}, this.options);
        extend(this.options, options);

        this.checked = false;

        this.timeline = new mojs.Timeline();

        for (var i = 0, len = this.options.tweens.length; i < len; ++i) {
            this.timeline.add(this.options.tweens[i]);
        }

        var self = this;
        this.el.addEventListener(clickHandler, function () {
            if (self.checked) {
                self.options.onUnCheck();
            }
            else {
                self.options.onCheck();
                self.timeline.start();
            }
            self.checked = !self.checked;
        });
    }

    Anima.prototype.options = {
        tweens: [
            new mojs.Burst({
                shape: 'circle',
                isRunLess: true
            })
        ],
        onCheck: function () { return false; },
        onUnCheck: function () { return false; }
    };

    function createHeartIc(el) {
        var el = el,
            span = el.querySelector('span'),
            svg = span.querySelector('svg'),
            opacityCurve = mojs.easing.path('M0,0 C0,87 27,100 40,100 L40,0 L100,0'),
            scaleCurve = mojs.easing.path('M0,0c0,80,39.2,100,39.2,100L40-100c0,0-0.7,106,60,106'),
            burst = new mojs.Burst({
                parent: el,
                duration: 1200,
                delay: 200,
                shape: 'circle',
                fill: '#E87171',
                x: '50%', y: '50%',
                opacity: { 1: 0 },
                childOptions: {
                    radius: { 6: 0 },
                    type: 'line',
                    stroke: '#E87171',
                    strokeWidth: 2
                },
                radius: { 0: 32 },
                count: 7,
                //isSwirl: true,
                isRunLess: true,
                easing: mojs.easing.bezier(0.1, 1, 0.3, 1)
            }),
            heart = new Anima(el, {
                tweens: [
                    /* // ring animation
                    new mojs.Transit({
                        parent: el11,
                        duration: 1000,
                        delay: 100,
                        type: 'circle',
                        radius: {0: 95},
                        fill: 'transparent',
                        stroke: '#C0C1C3',
                        strokeWidth: {50:0},
                        opacity: 0.4,
                        x: '50%',     
                        y: '50%',
                        isRunLess: true,
                        easing: mojs.easing.bezier(0, 1, 0.5, 1)
                    }),
                    // ring animation
                    new mojs.Transit({
                        parent: el11,
                        duration: 1800,
                        delay: 300,
                        type: 'circle',
                        radius: {0: 80},
                        fill: 'transparent',
                        stroke: '#C0C1C3',
                        strokeWidth: {40:0},
                        opacity: 0.2,
                        x: '50%',     
                        y: '50%',
                        isRunLess: true,
                        easing: mojs.easing.bezier(0, 1, 0.5, 1)
                    }), */
                    // icon scale animation

                    burst,

                    new mojs.Tween({
                        duration: 800,
                        easing: mojs.easing.ease.out,
                        onUpdate: function (progress) {
                            var opacityProgress = opacityCurve(progress);
                            span.style.opacity = opacityProgress;

                            var scaleProgress = scaleCurve(progress);
                            span.style.WebkitTransform = span.style.transform = 'scale3d(' + scaleProgress + ',' + scaleProgress + ',1)';

                            var colorProgress = opacityCurve(progress);
                            svg.style.fill = colorProgress >= 1 ? '#E87171' : 'none';
                            svg.style.stroke = colorProgress >= 1 ? '#E87171' : '#a1a8ad';
                        }
                    })
                ],
                onUnCheck: function () {
                    svg.style.fill = 'none';
                    svg.style.stroke = '#a1a8ad';
                }
            });

        return heart;
    }


    function createCartIc(el) {
        var el = el,
            span = el.querySelector('span'),
            svg = span.querySelector('svg'),
            body = svg.getElementsByTagName("path")[0],
            opacityCurve = mojs.easing.path('M0,0 C0,87 27,100 40,100 L40,0 L100,0'),
            scaleCurve = mojs.easing.path('M0,0c0,80,39.2,100,39.2,100L40-100c0,0-0.7,106,60,106'),
            burst = new mojs.Burst({
                parent: el,
                duration: 1200,
                delay: 200,
                shape: 'circle',
                fill: '#111111',
                x: '50%', y: '50%',
                opacity: { 1: 0 },
                childOptions: {
                    radius: { 6: 2 },
                    type: 'line',
                    stroke: '#111111',
                    strokeWidth: 2
                },
                radius: { 0: 36 },
                angle: 45,
                count: 4,
                //isSwirl: true,
                isRunLess: true,
                easing: mojs.easing.bezier(0.1, 1, 0.3, 1)
            }),
            heart = new Anima(el, {
                tweens: [
                    /* // ring animation
                    new mojs.Transit({
                        parent: el11,
                        duration: 1000,
                        delay: 100,
                        type: 'circle',
                        radius: {0: 95},
                        fill: 'transparent',
                        stroke: '#C0C1C3',
                        strokeWidth: {50:0},
                        opacity: 0.4,
                        x: '50%',     
                        y: '50%',
                        isRunLess: true,
                        easing: mojs.easing.bezier(0, 1, 0.5, 1)
                    }),
                    // ring animation
                    new mojs.Transit({
                        parent: el11,
                        duration: 1800,
                        delay: 300,
                        type: 'circle',
                        radius: {0: 80},
                        fill: 'transparent',
                        stroke: '#C0C1C3',
                        strokeWidth: {40:0},
                        opacity: 0.2,
                        x: '50%',     
                        y: '50%',
                        isRunLess: true,
                        easing: mojs.easing.bezier(0, 1, 0.5, 1)
                    }), */
                    // icon scale animation

                    burst,

                    new mojs.Tween({
                        duration: 800,
                        easing: mojs.easing.ease.out,
                        onUpdate: function (progress) {
                            var opacityProgress = opacityCurve(progress);
                            span.style.opacity = opacityProgress;

                            var scaleProgress = scaleCurve(progress);
                            span.style.WebkitTransform = span.style.transform = 'scale3d(' + scaleProgress + ',' + scaleProgress + ',1)';

                            var colorProgress = opacityCurve(progress);
                            body.style.fill = colorProgress >= 1 ? '#111111' : 'none';
                            svg.style.stroke = colorProgress >= 1 ? '#111111' : '#a1a8ad';
                        }
                    })
                ],
                onUnCheck: function () {
                    body.style.fill = 'none';
                    svg.style.stroke = '#a1a8ad';
                }
            });

        return heart;
    }


    var hearts = document.getElementsByClassName('pnl-favorites'),
        carts = document.getElementsByClassName('pnl-tocart');

    for (var i = 0; i < hearts.length; i++) {
        createHeartIc(hearts[i].querySelector('div'));
        createCartIc(carts[i].querySelector('div'));
    }
</script>




