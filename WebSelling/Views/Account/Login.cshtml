@using WebSelling.Models;
@model User
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_Layout.cshtml";
    User user = (User)Session["user"];
}
<link href="~/Content/Layout/css/Signin.css" rel="stylesheet" />
@Html.Action("Menu", "Menu")
<div class="container" style="margin-top: 3%; margin-bottom: 3%">
    <div class="overlay" id="overlay">
        <div class="sign-in" id="sign-in">
            <h1>Xin Chào!</h1>
            <p>Vui lòng đăng nhập bằng thông tin cá nhân của bạn</p>
            <button class="switch-button" id="slide-right-button">Đăng Nhập</button>
        </div>
        <div class="sign-up" id="sign-up">
            <h1>Chào, Bạn!</h1>
            <p>Tạo tài khoản để bắt đầu mua sắm nào?</p>
            <button class="switch-button" id="slide-left-button">Đăng Ký</button>
        </div>
    </div>
    <div class="form">
        <div class="sign-in" id="sign-in-info">
            <h1>Đăng Nhập</h1>
            <div class="social-media-buttons">
                <div class="icon">
                    <a href="#">
                        <svg viewBox="0 0 24 24">
                            <path fill="#000000" d="M17,2V2H17V6H15C14.31,6 14,6.81 14,7.5V10H14L17,10V14H14V22H10V14H7V10H10V6A4,4 0 0,1 14,2H17Z" />
                        </svg>
                    </a>
                </div>
                <div class="icon">
                    <a href="#">
                        <svg viewBox="0 0 24 24">
                            <path fill="#000000" d="M21,21H17V14.25C17,13.19 15.81,12.31 14.75,12.31C13.69,12.31 13,13.19 13,14.25V21H9V9H13V11C13.66,9.93 15.36,9.24 16.5,9.24C19,9.24 21,11.28 21,13.75V21M7,21H3V9H7V21M5,3A2,2 0 0,1 7,5A2,2 0 0,1 5,7A2,2 0 0,1 3,5A2,2 0 0,1 5,3Z" />
                        </svg>
                    </a>
                </div>
            </div>
            <p class="small">Hoặc sử dụng email của bạn:</p>
            <script>
                function validateForm() {
                    // Lấy giá trị của username và password
                    var user_email = document.getElementById("user_email").value;
                    var user_pass = document.getElementById("user_pass").value;
                    //Kiểm tra dữ liệu hợp lệ hay không
                    if (user_email == "" && user_pass == "") {
                        document.getElementById("Notlogin").innerHTML = "<div class='alert alert-default alert-dismissible fade show' role='alert'><strong>Lưu ý!</strong> Bạn chưa nhập thông tin<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>"
                    }
                    else if (user_pass == "") {
                        document.getElementById("Notlogin").innerHTML = "<div class='alert alert-default alert-dismissible fade show' role='alert'><strong>Lưu ý!</strong> Bạn chưa nhập mật khẩu.<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>"
                    }
                    else if (user_email == "") {
                        document.getElementById("Notlogin").innerHTML = "<div class='alert alert-default alert-dismissible fade show' role='alert'><strong>Lưu ý!</strong> Bạn chưa nhập email.<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>"
                    }
                    else {
                        return true;
                    }
                    return false;
                }</script>
            <form id="sign-in-form" action="@Url.Action("Login", "Account")" method="post" onsubmit="return validateForm()">
                <input type="email" placeholder="Email" id="user_email" name="user_email" />
                <input type="password" placeholder="Mật Khẩu" id="user_pass" name="user_pass" />
                @Html.Raw(Session["Notlogin"])
                <div id="Notlogin"></div>
                <p class="forgot-password">Quên Mật Khẩu?</p>
                <button type="submit" class="control-button in">Đăng Nhập</button>
            </form>
        </div>
        <div class="sign-up" id="sign-up-info">
            <h1>Tạo Tài Khoản</h1>
            <div class="social-media-buttons">
                <div class="icon">
                    <a href="#">
                        <svg viewBox="0 0 24 24">
                            <path fill="#000000" d="M17,2V2H17V6H15C14.31,6 14,6.81 14,7.5V10H14L17,10V14H14V22H10V14H7V10H10V6A4,4 0 0,1 14,2H17Z" />
                        </svg>
                    </a>
                </div>
                <div class="icon">
                    <a href="#">
                        <svg viewBox="0 0 24 24">
                            <path fill="#000000" d="M21,21H17V14.25C17,13.19 15.81,12.31 14.75,12.31C13.69,12.31 13,13.19 13,14.25V21H9V9H13V11C13.66,9.93 15.36,9.24 16.5,9.24C19,9.24 21,11.28 21,13.75V21M7,21H3V9H7V21M5,3A2,2 0 0,1 7,5A2,2 0 0,1 5,7A2,2 0 0,1 3,5A2,2 0 0,1 5,3Z" />
                        </svg>
                    </a>
                </div>
            </div>
            <p class="small">Hoặc dùng email của bạn để đăng ký:</p>
            <script>
                function valiReg() {
                    // Bước 1: Lấy giá trị của username và password
                    var user_emailes = document.getElementById("auser_emailes").value;
                    var user_passes = document.getElementById("auser_passes").value;
                    var user_repeat = document.getElementById("auser_repeat").value;
                    // Bước 2: Kiểm tra dữ liệu hợp lệ hay không
                    if (user_emailes == "" && user_passes == "" && user_repeat == "") {
                        document.getElementById("Testsignup").innerHTML = "<div class='alert alert-default alert-dismissible fade show' role='alert'><strong>Lưu ý!</strong> Bạn chưa nhập thông tin.<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>"
                    }
                    else if (user_passes == "") {
                        document.getElementById("Testsignup").innerHTML = "<div class='alert alert-default alert-dismissible fade show' role='alert'><strong>Lưu ý!</strong> Bạn chưa nhập mật khẩu.<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>"
                    }
                    else if (user_emailes == "") {
                        document.getElementById("Testsignup").innerHTML = "<div class='alert alert-default alert-dismissible fade show' role='alert'><strong>Lưu ý!</strong> Bạn chưa nhập vào email.<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>"
                    }
                    else if (user_repeat == "") {
                        document.getElementById("Testsignup").innerHTML = "<div class='alert alert-default alert-dismissible fade show' role='alert'><strong>Lưu ý!</strong> Bạn chưa xác nhận lại mật khẩu.<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>"
                    }
                    else if (user_passes != user_repeat) {
                        document.getElementById("Testsignup").innerHTML = "<div class='alert alert-default alert-dismissible fade show' role='alert'><strong>Lưu ý!</strong> Nhập sai mật khẩu.<button type='button' class='close' data-dismiss='alert' aria-label='Close'><span aria-hidden='true'>&times;</span></button></div>"
                    }
                    else {
                        return true;
                    }
                    return false;
                }
            </script>
            <form id="sign-up-form" action="@Url.Action("Registration", "Account")" method="post" onsubmit="return valiReg()">
                <input type="email" placeholder="Email" id="auser_emailes" name="User_Email" />
                <input type="password" placeholder="Mật Khẩu" id="auser_passes" name="User_Pass" />
                <input type="password" placeholder="Xác Nhận Mật Khẩu" id="auser_repeat" name="user_repeat" />
                @Html.Raw(Session["Testsignup"])
                <div id="Testsignup"></div>
                <button type="submit" class="control-button up">Đăng Ký</button>
            </form>
        </div>
    </div>
</div>
<script>
    var overlay = document.getElementById("overlay");

    // Buttons to 'switch' the page
    var openSignUpButton = document.getElementById("slide-left-button");
    var openSignInButton = document.getElementById("slide-right-button");

    // The sidebars
    var leftText = document.getElementById("sign-in");
    var rightText = document.getElementById("sign-up");

    // The forms
    var accountForm = document.getElementById("sign-in-info")
    var signinForm = document.getElementById("sign-up-info");

    // Open the Sign Up page
    openSignUp = () => {
        // Remove classes so that animations can restart on the next 'switch'
        leftText.classList.remove("overlay-text-left-animation-out");
        overlay.classList.remove("open-sign-in");
        rightText.classList.remove("overlay-text-right-animation");
        // Add classes for animations
        accountForm.className += " form-left-slide-out"
        rightText.className += " overlay-text-right-animation-out";
        overlay.className += " open-sign-up";
        leftText.className += " overlay-text-left-animation";
        // hide the sign up form once it is out of view
        setTimeout(function () {
            accountForm.classList.remove("form-left-slide-in");
            accountForm.style.display = "none";
            accountForm.classList.remove("form-left-slide-out");
        }, 700);
        // display the sign in form once the overlay begins moving right
        setTimeout(function () {
            signinForm.style.display = "flex";
            signinForm.classList += " form-right-slide-in";
        }, 200);
    }

    // Open the Sign In page
    openSignIn = () => {
        // Remove classes so that animations can restart on the next 'switch'
        leftText.classList.remove("overlay-text-left-animation");
        overlay.classList.remove("open-sign-up");
        rightText.classList.remove("overlay-text-right-animation-out");
        // Add classes for animations
        signinForm.classList += " form-right-slide-out";
        leftText.className += " overlay-text-left-animation-out";
        overlay.className += " open-sign-in";
        rightText.className += " overlay-text-right-animation";
        // hide the sign in form once it is out of view
        setTimeout(function () {
            signinForm.classList.remove("form-right-slide-in")
            signinForm.style.display = "none";
            signinForm.classList.remove("form-right-slide-out")
        }, 700);
        // display the sign up form once the overlay begins moving left
        setTimeout(function () {
            accountForm.style.display = "flex";
            accountForm.classList += " form-left-slide-in";
        }, 200);
    }

    // When a 'switch' button is pressed, switch page
    openSignUpButton.addEventListener("click", openSignUp, false);
    openSignInButton.addEventListener("click", openSignIn, false);
</script>


